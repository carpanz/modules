process {

    publishDir = { "${params.outdir}/${task.process.tokenize(':')[-1].tokenize('_')[0].toLowerCase()}" }
    executor = 'slurm'

    withName: SAMTOOLS_SORT {
        ext.prefix = "sorted"
    }

    withName: SAMTOOLS_VIEW_SINGLE {
        ext.args = '-b -f 5 -F 256'
    }

    withName: SAMTOOLS_VIEW_BOTH {
        ext.args = '-b -f 13 -F 256'
    }

    withName: KRAKEN2_SINGLE {
        memory = 16.GB
    }

    withName: KRAKEN2_BOTH {
        memory = 16.GB
    }

}
